<html>
<title>AtCoder Rating Estimator</title>
<body>
<script language="javascript" src="atcoder_rating.js"></script>
<script language="javascript">
function calc(last, n, goal_rating) {
	goal_rating = unpositivize_rating(goal_rating);
	last = unpositivize_rating(last);
	if (n == 0) {
		return goal_rating + 1200.0; // corner case
	}
	// binary search
	var lo = -10000.0;
	var hi = 10000.0;
	for (var i = 0; i < 100; ++i) {
		var mid = (hi + lo) / 2;
		var r = calc_rating_from_last(last, mid, n);
		if (r >= goal_rating) {
			hi = mid;
		} else {
			lo = mid;
		}
	}
	return hi;
}

function keydown_enter() {
    if(window.event.keyCode == 13) {
        document.getElementById("calculate").click();
    }
}

function calculatePerformance() {
	var last_rating = document.getElementById("last_rating").value;
	last_rating = parseInt(last_rating);
	var n = document.getElementById("num_rated").value;
	n = parseInt(n, 10);
	var goal_rating = document.getElementById("goal_rating").value;
	goal_rating = parseInt(goal_rating, 10);
	document.getElementById("goal_performance").textContent = 
		calc(last_rating, n, goal_rating).toString();
}
</script>

<p>直前のレート<input type="text" id="last_rating" onkeydown="keydown_enter();"></p>
<p>これまでの参加回数<input type="text" id="num_rated" onkeydown="keydown_enter();"></p>
<p>目標レーティング<input type="text" id="goal_rating" onkeydown="keydown_enter();"></p>
<p>必要なパフォーマンス<div id="goal_performance">5000兆</div><p>
<button type="submit" id="calculate" onclick="calculatePerformance();">計算する</button>
</p>

</body>
</html> 